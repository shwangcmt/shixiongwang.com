---
import DefaultSidebar from '@astrojs/starlight/components/Sidebar.astro';
import { getCourseEntries } from '../../lib/course-utils';

const { pathname } = Astro.url;
const entries = await getCourseEntries(pathname);

if (entries && Astro.locals.starlightRoute) {
    Astro.locals.starlightRoute.sidebar = entries.map(e => ({
        type: 'link' as const,
        label: e.label,
        href: e.href,
        isCurrent: e.isCurrent,
        badge: undefined,
        attrs: {},
    }));
}
---

<DefaultSidebar {...Astro.props} />
